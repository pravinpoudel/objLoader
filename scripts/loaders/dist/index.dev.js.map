{"version":3,"sources":["index.js"],"names":["draw","webglUtility","resizeCanvas","gl","canvas","viewport","width","height","clear","DEPTH_BUFFER_BIT","COLOR_BUFFER_BIT","enable","DEPTH_TEST","clearColor","modelAngle","modelMatrix","m4","yRotation","uniformMatrix4fv","modelMatrixLocation","normalInverseMatrix","inverse","normalMatrixLocation","aspect","clientWidth","clientHeight","fov","Math","PI","projectionMatrix","perspective","uniform1f","scaleLocation","cameraAngle","cameraMatrix","translate","maxSideLength","distanceScale","cameraPosition","viewMatrix","uniform3fv","cameraLocation","vProjectionMatrix","multiply","viewProjectionLocation","bufferLists","forEach","index","positionBuffer","colorBuffer","normalBuffer","textureBuffer","tangentBuffer","biTangentBuffer","material","length","ambient","diffuse","opticalDensity","specular","emmisive","shininess","opacity","bindBuffer","ARRAY_BUFFER","enableVertexAttribArray","positionLocation","vertexAttribPointer","FLOAT","normalLocation","vertexColorLocation","texCordinateLocation","tangentLocation","ambientLocation","diffuseLocation","specularLocation","emmisiveLocation","opacityLocation","parseFloat","shininessLocation","activeTexture","TEXTURE0","bindTexture","TEXTURE_2D","normalMap","TEXTURE1","diffuseMap","TEXTURE2","specularMap","uniform1i","normalSamplerLocation","diffuseSamplerLocation","specularSamplerLocation","drawArrays","TRIANGLES","window","requestAnimationFrame","document","getElementById","getContext","console","log","objFileLoader","geometries","materials","minMax","program","createProgramFromShaderVariable","loader_VS","loader_FS","useProgram","getAttribLocation","biTangentLocation","getUniformLocation","lightLocation","hasNormalLocation","ambientlightLocation","minValue","min","maxValue","max","range","subtractVectors","offSet","scaleVector","addVectors","vao","createVertexArray","bindVertexArray","map","geometry","createBuffer","localPosition","attributes","position","bufferData","Float32Array","STATIC_DRAW","vColor","colorValue","normalData","normalCord","textureCord","textCord","tangentVector","tangents","biTangent"],"mappings":"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","sourcesContent":["import { webglUtility } from \"../utility/webglutility.js\";\r\n\r\n(async function () {\r\n  const canvas = document.getElementById(\"main-canvas\");\r\n  let gl = canvas.getContext(\"webgl2\");\r\n  if (!gl) {\r\n    console.log(\"context couldnot be generated\");\r\n    return;\r\n  }\r\n  let { geometries, materials, minMax } = await objFileLoader(gl);\r\n  console.log(geometries);\r\n\r\n  let program = webglUtility.createProgramFromShaderVariable(\r\n    gl,\r\n    loader_VS,\r\n    loader_FS\r\n  );\r\n  gl.useProgram(program);\r\n\r\n  let positionLocation = gl.getAttribLocation(program, \"a_position\");\r\n  let vertexColorLocation = gl.getAttribLocation(program, \"a_color\");\r\n  let normalLocation = gl.getAttribLocation(program, \"a_normal\");\r\n  let texCordinateLocation = gl.getAttribLocation(program, \"a_texCord\");\r\n  let tangentLocation = gl.getAttribLocation(program, \"a_tangent\");\r\n  let biTangentLocation = gl.getAttribLocation(program, \"a_bitangent\");\r\n\r\n  let modelMatrixLocation = gl.getUniformLocation(program, \"u_modelMatrix\");\r\n  let viewProjectionLocation = gl.getUniformLocation(program, \"u_vpMatrix\");\r\n  let scaleLocation = gl.getUniformLocation(program, \"u_scale\");\r\n  let normalMatrixLocation = gl.getUniformLocation(program, \"u_worldNormal\");\r\n  let cameraLocation = gl.getUniformLocation(program, \"u_cameraWorld\");\r\n  let lightLocation = gl.getUniformLocation(program, \"u_lightDirection\");\r\n  let ambientLocation = gl.getUniformLocation(program, \"ambient\");\r\n  let diffuseLocation = gl.getUniformLocation(program, \"diffuse\");\r\n  let specularLocation = gl.getUniformLocation(program, \"specular\");\r\n  let emmisiveLocation = gl.getUniformLocation(program, \"emmisive\");\r\n  let shininessLocation = gl.getUniformLocation(program, \"shininess\");\r\n  let opacityLocation = gl.getUniformLocation(program, \"opacity\");\r\n\r\n  let diffuseSamplerLocation = gl.getUniformLocation(program, \"diffuseSampler\");\r\n  let normalSamplerLocation = gl.getUniformLocation(program, \"normalSampler\");\r\n  let specularSamplerLocation = gl.getUniformLocation(\r\n    program,\r\n    \"specularSampler\"\r\n  );\r\n\r\n  let hasNormalLocation = gl.getUniformLocation(program, \"hasNormal\");\r\n\r\n  let ambientlightLocation = gl.getUniformLocation(program, \"u_ambientLight\");\r\n\r\n  // find the range and extend of an object to calculate the offset to properly view the object\r\n\r\n  let { min: minValue, max: maxValue } = minMax;\r\n  const range = m4.subtractVectors(maxValue, minValue);\r\n  const maxSideLength = m4.length(range);\r\n  const offSet = m4.scaleVector(\r\n    m4.addVectors(minValue, m4.scaleVector(range, 0.5)),\r\n    -1.0\r\n  );\r\n\r\n  // -----------------------------------------------\r\n  let vao = gl.createVertexArray();\r\n  gl.bindVertexArray(vao);\r\n  let cameraAngle = 0.0;\r\n  let modelAngle = 0.5;\r\n  let distanceScale = 0.6;\r\n\r\n  let bufferLists = geometries.map((geometry, index) => {\r\n    let positionBuffer = gl.createBuffer();\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\r\n    let localPosition = geometry.attributes.position;\r\n\r\n    gl.bufferData(\r\n      gl.ARRAY_BUFFER,\r\n      new Float32Array([...localPosition]),\r\n      gl.STATIC_DRAW\r\n    );\r\n\r\n    let colorBuffer = gl.createBuffer();\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, colorBuffer);\r\n    let vColor = geometry.attributes.colorValue;\r\n\r\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vColor), gl.STATIC_DRAW);\r\n\r\n    let normalData = geometry.attributes.normalCord;\r\n    let normalBuffer = gl.createBuffer();\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, normalBuffer);\r\n    gl.bufferData(\r\n      gl.ARRAY_BUFFER,\r\n      new Float32Array(normalData),\r\n      gl.STATIC_DRAW\r\n    );\r\n\r\n    let textureCord = geometry.attributes.textCord;\r\n    let textureBuffer = gl.createBuffer();\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, textureBuffer);\r\n    gl.bufferData(\r\n      gl.ARRAY_BUFFER,\r\n      new Float32Array(textureCord),\r\n      gl.STATIC_DRAW\r\n    );\r\n\r\n    let tangentVector = geometry.tangents;\r\n    let tangentBuffer = gl.createBuffer();\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, tangentBuffer);\r\n    gl.bufferData(\r\n      gl.ARRAY_BUFFER,\r\n      new Float32Array(tangentVector),\r\n      gl.STATIC_DRAW\r\n    );\r\n\r\n    let biTangent = geometry.biTangent;\r\n    let biTangentBuffer = gl.createBuffer();\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, biTangentBuffer);\r\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(biTangent), gl.STATIC_DRAW);\r\n\r\n    let material = geometry.material;\r\n    return {\r\n      positionBuffer,\r\n      colorBuffer,\r\n      normalBuffer,\r\n      textureBuffer,\r\n      tangentBuffer,\r\n      biTangentBuffer,\r\n      length: localPosition.length,\r\n      material: materials[material],\r\n    };\r\n  });\r\n\r\n  gl.uniform3fv(lightLocation, [10.0, 10.0, 50.0]);\r\n  gl.uniform3fv(ambientlightLocation, [0.2, 0.2, 0.2]);\r\n  gl.uniform1i(hasNormalLocation, 0);\r\n\r\n  function draw() {\r\n    webglUtility.resizeCanvas(gl.canvas);\r\n    gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);\r\n\r\n    gl.clear(gl.DEPTH_BUFFER_BIT | gl.COLOR_BUFFER_BIT);\r\n    gl.enable(gl.DEPTH_TEST);\r\n    // gl.enable(gl.CULL_FACE);\r\n    gl.clearColor(0.1, 0.1, 0.1, 0.3);\r\n\r\n    modelAngle += 0.008;\r\n    let modelMatrix = m4.yRotation(modelAngle);\r\n    gl.uniformMatrix4fv(modelMatrixLocation, false, modelMatrix);\r\n\r\n    let normalInverseMatrix = m4.inverse(modelMatrix);\r\n    gl.uniformMatrix4fv(normalMatrixLocation, true, normalInverseMatrix);\r\n\r\n    let aspect = gl.canvas.clientWidth / gl.canvas.clientHeight;\r\n    let fov = (Math.PI / 180) * 60;\r\n    let projectionMatrix = m4.perspective(fov, aspect, 0.1, 1000);\r\n\r\n    gl.uniform1f(scaleLocation, 0.5);\r\n\r\n    cameraAngle += 0.0;\r\n    let cameraMatrix = m4.yRotation(cameraAngle);\r\n    cameraMatrix = m4.translate(\r\n      cameraMatrix,\r\n      0.0,\r\n      0.1,\r\n      maxSideLength * distanceScale\r\n    );\r\n    let cameraPosition = [cameraMatrix[12], cameraMatrix[13], cameraMatrix[14]];\r\n    // cameraMatrix = m4.lookAt(cameraPosition, [0.0, 0.0, 0.0], [0.0, 1.0, 0.0]);\r\n    viewMatrix = m4.inverse(cameraMatrix);\r\n\r\n    gl.uniform3fv(cameraLocation, cameraPosition);\r\n\r\n    let vProjectionMatrix = m4.multiply(projectionMatrix, viewMatrix);\r\n    gl.uniformMatrix4fv(viewProjectionLocation, false, vProjectionMatrix);\r\n\r\n    bufferLists.forEach(\r\n      (\r\n        {\r\n          positionBuffer,\r\n          colorBuffer,\r\n          normalBuffer,\r\n          textureBuffer,\r\n          tangentBuffer,\r\n          biTangentBuffer,\r\n          material,\r\n          length,\r\n        },\r\n        index\r\n      ) => {\r\n        const {\r\n          ambient = [1.0, 1.0, 1.0],\r\n          diffuse = [0.8, 0.87, 0.8],\r\n          opticalDensity = 1.0,\r\n          specular = [0.0, 0.0, 0.0],\r\n          emmisive = [0.0, 0.0, 0.0],\r\n          shininess = 1.0,\r\n          opacity = 1.0,\r\n        } = material;\r\n\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\r\n        gl.enableVertexAttribArray(positionLocation);\r\n        gl.vertexAttribPointer(positionLocation, 3, gl.FLOAT, false, 0, 0);\r\n\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, normalBuffer);\r\n        gl.enableVertexAttribArray(normalLocation);\r\n        gl.vertexAttribPointer(normalLocation, 3, gl.FLOAT, false, 0, 0);\r\n\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, colorBuffer);\r\n        gl.enableVertexAttribArray(vertexColorLocation);\r\n        gl.vertexAttribPointer(vertexColorLocation, 3, gl.FLOAT, false, 0, 0);\r\n\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, textureBuffer);\r\n        gl.enableVertexAttribArray(texCordinateLocation);\r\n        gl.vertexAttribPointer(texCordinateLocation, 2, gl.FLOAT, false, 0, 0);\r\n\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, tangentBuffer);\r\n        gl.enableVertexAttribArray(tangentLocation);\r\n        gl.vertexAttribPointer(tangentLocation, 3, gl.FLOAT, false, 0, 0);\r\n\r\n        // gl.bindBuffer(gl.ARRAY_BUFFER, biTangentBuffer);\r\n        // gl.enableVertexAttribArray(biTangentLocation);\r\n        // gl.vertexAttribPointer(biTangentLocation, 3, gl.FLOAT, false, 0, 0);\r\n\r\n        // material value\r\n        gl.uniform3fv(ambientLocation, ambient);\r\n        gl.uniform3fv(diffuseLocation, diffuse);\r\n        // gl.uniform3fv(ambientLocation, opticalDensity);\r\n        gl.uniform3fv(specularLocation, specular);\r\n        gl.uniform3fv(emmisiveLocation, emmisive);\r\n        gl.uniform1f(opacityLocation, parseFloat(opacity));\r\n        gl.uniform1f(shininessLocation, shininess);\r\n\r\n        gl.activeTexture(gl.TEXTURE0);\r\n        gl.bindTexture(gl.TEXTURE_2D, material.normalMap);\r\n\r\n        gl.activeTexture(gl.TEXTURE1);\r\n        gl.bindTexture(gl.TEXTURE_2D, material.diffuseMap);\r\n\r\n        gl.activeTexture(gl.TEXTURE2);\r\n        gl.bindTexture(gl.TEXTURE_2D, material.specularMap);\r\n\r\n        // texture mapping\r\n        gl.uniform1i(normalSamplerLocation, 0);\r\n        gl.uniform1i(diffuseSamplerLocation, 1);\r\n        gl.uniform1i(specularSamplerLocation, 2);\r\n\r\n        gl.drawArrays(gl.TRIANGLES, 0, length / 3);\r\n      }\r\n    );\r\n    window.requestAnimationFrame(draw);\r\n  }\r\n  window.requestAnimationFrame(draw);\r\n})();\r\n"],"file":"index.dev.js"}